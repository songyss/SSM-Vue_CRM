<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.csi.mapper.DepartmentMapper">
    <cache/>
    <insert id="addDepartment">
        insert into departments(department_name,phone,super_depart_id,is_delete)
        values(#{departmentName},#{phone},#{superDepartId},#{isDelete})
    </insert>
    <update id="updateDepartment">
        update departments
        <set>
            <if test="departmentName != null">
                department_name = #{departmentName},
            </if>
            <if test="phone != null">
                phone = #{phone},
            </if>
            <if test="superDepartId != null">
                super_depart_id = #{superDepartId},
            </if>
            <if test="isDelete != null">
                is_delete = #{isDelete},
            </if>
        </set>
        where department_id = #{departmentId}
    </update>
    <select id="findAllDepartments" resultType="com.csi.domain.Department">
        select * from departments where super_depart_id = #{superDepartId}
    </select>
    <select id="findAllCompanys" resultType="com.csi.domain.Department">
        select * from departments where super_depart_id is null
    </select>


</mapper>
